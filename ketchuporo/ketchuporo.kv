#:kivy 1.8.0

<WelcomeScreen>:
    BoxLayout:
        orientation: "vertical"
        Label:
            font_size: 70
            text: "Ketchuporo Timer"
        Button:
            text: "Start!"
            on_release:
                root.manager.current = 'timer'
                root.manager.transition.direction = 'left'
        Button:
            text: "Settings"
            on_release:
                root.manager.current = 'settings'
                root.manager.transition.direction = 'left'
        Button:
            text: "Quit"
            on_press: root.exit()


<TimerScreen>:
    on_pre_enter: root.timer_pre_start()
    on_enter: root.timer_start()
    BoxLayout:
        orientation: "vertical"
        Label:
            font_size: 70
            text: root.model.timer_label
        Label:
            font_size: 70
            text: str(root.model.pomodoros_counter)


<PomodorosOverScreen>:
    on_pre_enter: root.update_button_label()
    BoxLayout:
        orientation: "vertical"
        Label:
            font_size: 70
            text: "Time's Up!"
        Button:
            text: root.button_label.label
            on_release:
                root.manager.current = 'break'
                root.manager.transition.direction = 'left'


<BreakScreen>:
    on_pre_enter: root.timer_pre_start()
    on_enter: root.timer_start()
    BoxLayout:
        orientation: "vertical"
        Label:
            font_size: 70
            text: root.model.timer_label


<BreaksOverScreen>:
    BoxLayout:
        orientation: "vertical"
        Label:
            font_size: 70
            text: "Break is over!"
        Button:
            text: "Start pomodoro"
            on_release:
                root.manager.current = 'timer'
                root.manager.transition.direction = 'left'


<SettingsScreen>:
    BoxLayout:
        id: layout
        orientation: "vertical"
        Label:
            font_size: 25
            text: "Pomodoro duration: {} min".format(root.model.pomodoro_duration)
        Slider:
            id: pomodoro_duration
            value: 25
            min: 15
            max: 60
            step: 1
            on_value: root.set_pomodoro_duration(*args)
        Label:
            font_size: 25
            text: "Short break duration: {} min".format(root.model.short_break_duration)
        Slider:
            id: short_break_duration
            value: 5
            min: 1
            max: 15
            step: 1
            on_value: root.set_short_break_duration(*args)
        Label:
            font_size: 25
            text: "Long break duration: {} min".format(root.model.long_break_duration)
        Slider:
            id: long_break_duration
            value: 15
            min: 5
            max: 30
            step: 1
            on_value: root.set_long_break_duration(*args)
        Label:
            font_size: 25
            text: "Long break after {} pomodori".format(root.model.pomodori_for_cycle)
        Slider:
            id: pomodori_for_cycle
            value: 4
            min: 2
            max: 10
            step: 1
            on_value: root.set_pomodori_for_cycle(*args)
        Button:
            text: "Reset to defaults"
            on_release: root.reset_settings()
        Button:
            text: "Save"
            on_release:
                root.manager.current = 'welcome'
                root.manager.transition.direction = 'right'
